include:
  - events/compose.yml
services:
  queues:
    container_name: ${COMPOSE_PROJECT_NAME}-queues
    restart: always
    depends_on:
      songs:
        condition: service_started
      users:
        condition: service_started
      db:
        condition: service_started
      migrator:
        condition: service_completed_successfully
      cache-pubsub:
        condition: service_started
      configs:
        condition: service_started
    build:
      context: ..
      dockerfile: ./docker/Dockerfile.rust
      args:
        SERVICE: queues
