# Authentication service
location = /api/auth {
    internal;

    proxy_method GET;
    proxy_pass http://users_service/auth;
    proxy_pass_request_body off;
    proxy_set_header Content-Length "";
    proxy_set_header X-Original-URI $request_uri;
    proxy_set_header X-Original-Method $request_method;

    # Forward all incoming headers
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-Proto $scheme;
}

# USERS route
location /api/users {
    include inbound/service.conf;

    proxy_pass http://users_service/public;
}

# SONGS route
location /api/songs {
    include inbound/service.conf;

    proxy_pass http://songs_service/public;
}

# QUEUES route
location /api/queues {
    include inbound/service.conf;

    proxy_pass http://queues_service/public;
}


# CONFIGS route
location /api/configs {
    include inbound/service.conf;

    proxy_pass http://configs_service/public;
}
